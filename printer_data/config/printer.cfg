[include mainsail.cfg]
[include steppers.cfg]
[include extruder.cfg]
[include fans.cfg]
[include sensors.cfg]
[include Adaptive_Mesh.cfg]
[include mesh.cfg]
[include timelapse.cfg]
[include macros.cfg]
[include kshaketune.cfg]
[include motors_sync.cfg]
[include light.cfg]

[idle_timeout]
timeout: 4800

[force_move]
enable_force_move: True

[verify_heater extruder]
max_error: 200 #(in seconds, default is 120)

[danger_options] allow_plugin_override: True


########################################
# MAIN
########################################

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_2C0020000C50315939343520-if00

[printer]
kinematics: limited_corexy
max_velocity: 1380
max_accel: 78350
minimum_cruise_ratio: 0.1
max_x_accel: 45000
max_y_accel: 16000
scale_xy_accel: true
max_z_velocity: 20
max_z_accel: 1500
square_corner_velocity: 15.0

########################################
# HEATED BED
########################################

[heater_bed]
heater_pin: PA1
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF3
control: pid
pid_kp = 52.977
pid_ki = 1.909
pid_kd = 367.527
max_power: 0.7
pwm_cycle_time: 0.0166
min_temp: 0
max_temp: 120

########################################
# TUNING
########################################

[input_shaper]
enabled_extruders: extruder
#shaper_freq_x: 111.2
smoother_freq_x: 109.4
shaper_type_x: smooth_mzv
#damping_ratio_x: 0.031

shaper_freq_y: 89.0
#smoother_freq_y: 89.8
shaper_type_y: ei
damping_ratio_y: 0.029

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [stepper_z]
#*# position_endstop = -0.080
#*#
#*# [beacon model default]
#*# model_coef = 1.483303836398399,
#*# 	  1.854085002217447,
#*# 	  0.8074252373526849,
#*# 	  0.3116401903562349,
#*# 	  0.3589507786925229,
#*# 	  0.42096367665155976,
#*# 	  -0.4057732603189803,
#*# 	  -0.5162339085941002,
#*# 	  0.355008180219388,
#*# 	  0.3315262788618281
#*# model_domain = 1.8335783659486415e-07,1.9344443278306973e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 24.651572
#*# model_offset = -0.26500
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.001665, 0.008731, 0.017951, 0.013458, 0.018484, 0.020871, 0.020901, 0.022147, 0.023932, 0.024804, 0.028236, 0.029004, 0.029391, 0.031119, 0.029870, 0.032967, 0.032560, 0.032608, 0.031899, 0.028005, 0.025145, 0.021752, 0.016793, 0.015089, 0.012556, 0.006620, 0.007075, 0.004142, 0.002252, 0.002103, 0.001464, 0.000316, -0.001751, -0.003256, -0.007218, -0.012183, -0.014732
#*# 	  -0.000197, 0.007530, 0.014131, 0.014202, 0.017971, 0.020076, 0.019750, 0.022134, 0.024154, 0.026560, 0.028544, 0.030035, 0.033095, 0.031872, 0.032519, 0.033102, 0.032474, 0.031511, 0.029619, 0.027744, 0.024234, 0.020889, 0.018091, 0.015183, 0.012821, 0.010224, 0.006682, 0.004333, 0.003302, 0.002012, 0.001195, -0.000753, -0.004024, -0.004706, -0.008962, -0.014261, -0.016819
#*# 	  0.000729, 0.008134, 0.011047, 0.015247, 0.018373, 0.020055, 0.023696, 0.024593, 0.027541, 0.031609, 0.032165, 0.033879, 0.034361, 0.034687, 0.033113, 0.032742, 0.032590, 0.031123, 0.030002, 0.026773, 0.024368, 0.022878, 0.019008, 0.018834, 0.014530, 0.011259, 0.009944, 0.007280, 0.008225, 0.003349, 0.002119, -0.001361, -0.003930, -0.008113, -0.011498, -0.015767, -0.019208
#*# 	  0.004091, 0.009014, 0.012236, 0.016213, 0.021332, 0.021419, 0.026009, 0.029702, 0.030161, 0.034299, 0.035347, 0.035569, 0.037150, 0.035935, 0.035176, 0.034304, 0.033112, 0.030688, 0.029551, 0.027425, 0.024766, 0.023411, 0.020742, 0.019674, 0.017932, 0.014033, 0.011878, 0.009194, 0.007418, 0.005370, 0.002684, -0.001728, -0.005165, -0.009133, -0.013160, -0.017710, -0.013356
#*# 	  0.006522, 0.013433, 0.015691, 0.021035, 0.022511, 0.026285, 0.030765, 0.031976, 0.036089, 0.038916, 0.038809, 0.041530, 0.040220, 0.040111, 0.039986, 0.038439, 0.037381, 0.036489, 0.035418, 0.032445, 0.030443, 0.028747, 0.025291, 0.024625, 0.021054, 0.019124, 0.015352, 0.012892, 0.011949, 0.008452, 0.006228, 0.001694, -0.002103, -0.005779, -0.010027, -0.013682, -0.016859
#*# 	  0.009284, 0.016445, 0.020305, 0.024102, 0.028961, 0.029392, 0.032578, 0.036669, 0.034302, 0.039248, 0.040535, 0.040241, 0.041563, 0.042320, 0.040832, 0.041977, 0.040764, 0.037941, 0.040506, 0.036243, 0.033496, 0.032322, 0.027212, 0.026444, 0.022989, 0.019402, 0.016980, 0.013954, 0.011374, 0.010026, 0.007240, 0.004816, 0.001833, -0.001458, -0.005511, -0.009559, -0.012271
#*# 	  0.014292, 0.019054, 0.026463, 0.026952, 0.030771, 0.033037, 0.034610, 0.037138, 0.036184, 0.040599, 0.041214, 0.042380, 0.043336, 0.042740, 0.044610, 0.044416, 0.044323, 0.043560, 0.041418, 0.040519, 0.036501, 0.034623, 0.030688, 0.026483, 0.023265, 0.020308, 0.016664, 0.013234, 0.012484, 0.010666, 0.010125, 0.008186, 0.004672, 0.002518, -0.001346, -0.004255, -0.008339
#*# 	  0.016282, 0.021086, 0.027353, 0.028497, 0.033227, 0.033885, 0.035362, 0.037852, 0.037327, 0.040463, 0.042542, 0.042831, 0.044184, 0.045183, 0.045838, 0.047602, 0.046426, 0.046415, 0.045615, 0.041856, 0.039225, 0.035754, 0.032015, 0.027855, 0.025361, 0.020880, 0.017800, 0.015540, 0.013572, 0.013777, 0.011957, 0.010746, 0.008011, 0.005276, 0.002116, -0.003103, -0.005013
#*# 	  0.018862, 0.023418, 0.028972, 0.033191, 0.034723, 0.037551, 0.038662, 0.040393, 0.043206, 0.043897, 0.046504, 0.047973, 0.047572, 0.048756, 0.049376, 0.049947, 0.049533, 0.049207, 0.047455, 0.045096, 0.041290, 0.038798, 0.035745, 0.031743, 0.030057, 0.026069, 0.022404, 0.020086, 0.019158, 0.016935, 0.016807, 0.012527, 0.010338, 0.007733, 0.003985, -0.000381, -0.003764
#*# 	  0.020621, 0.026623, 0.030547, 0.034323, 0.039125, 0.038793, 0.043643, 0.048891, 0.048020, 0.052487, 0.053231, 0.054081, 0.054944, 0.054295, 0.054656, 0.053627, 0.052287, 0.050482, 0.050721, 0.047429, 0.045161, 0.042975, 0.039581, 0.037522, 0.036600, 0.033254, 0.030939, 0.027882, 0.024919, 0.024413, 0.021794, 0.017071, 0.015583, 0.011597, 0.007820, 0.005143, -0.001516
#*# 	  0.025979, 0.029875, 0.036163, 0.038566, 0.042473, 0.047463, 0.049823, 0.053229, 0.056939, 0.058972, 0.060542, 0.060986, 0.059988, 0.060462, 0.059935, 0.058560, 0.057276, 0.055100, 0.053823, 0.050609, 0.049247, 0.047733, 0.045547, 0.045390, 0.043581, 0.041596, 0.039336, 0.035597, 0.032316, 0.031003, 0.027448, 0.024141, 0.020779, 0.016120, 0.014054, 0.009837, 0.007181
#*# 	  0.029745, 0.035833, 0.039660, 0.044869, 0.045703, 0.050983, 0.055099, 0.055999, 0.061602, 0.062324, 0.064280, 0.066614, 0.065072, 0.065454, 0.062844, 0.062733, 0.061458, 0.059436, 0.058395, 0.056282, 0.052926, 0.053547, 0.049928, 0.049494, 0.050205, 0.046357, 0.044302, 0.041128, 0.038349, 0.036674, 0.033590, 0.029517, 0.026098, 0.023107, 0.020611, 0.016429, 0.014653
#*# 	  0.034620, 0.040622, 0.047181, 0.048310, 0.051250, 0.056298, 0.057893, 0.060435, 0.062756, 0.064739, 0.064975, 0.066550, 0.065723, 0.066007, 0.066030, 0.064966, 0.064486, 0.064259, 0.062046, 0.059472, 0.056631, 0.055795, 0.052956, 0.051026, 0.049579, 0.047585, 0.045031, 0.042735, 0.039045, 0.038043, 0.036359, 0.032640, 0.030006, 0.025861, 0.023427, 0.019802, 0.018451
#*# 	  0.039449, 0.046424, 0.048151, 0.054217, 0.054764, 0.057033, 0.059561, 0.061144, 0.061098, 0.063685, 0.067493, 0.065465, 0.067405, 0.068360, 0.065250, 0.068336, 0.067472, 0.065454, 0.065468, 0.062160, 0.058649, 0.057333, 0.053858, 0.050782, 0.049415, 0.046727, 0.043030, 0.042265, 0.039154, 0.038298, 0.036692, 0.033798, 0.031323, 0.029609, 0.026718, 0.023202, 0.021420
#*# 	  0.043219, 0.049209, 0.054819, 0.057339, 0.060043, 0.060874, 0.061697, 0.062814, 0.063448, 0.065837, 0.066084, 0.068892, 0.068624, 0.068427, 0.068588, 0.069426, 0.071120, 0.069628, 0.068267, 0.066210, 0.062076, 0.059501, 0.055835, 0.052803, 0.050242, 0.047304, 0.044491, 0.042379, 0.040222, 0.040357, 0.039389, 0.036291, 0.035275, 0.031483, 0.029117, 0.025847, 0.022419
#*# 	  0.043418, 0.050059, 0.052849, 0.058375, 0.059804, 0.060729, 0.063337, 0.063392, 0.065982, 0.066279, 0.068921, 0.069296, 0.071072, 0.070768, 0.070503, 0.071065, 0.070433, 0.069656, 0.068698, 0.065666, 0.062225, 0.059516, 0.055068, 0.052301, 0.049794, 0.047035, 0.044478, 0.043284, 0.040159, 0.040034, 0.038772, 0.036441, 0.034825, 0.031881, 0.028047, 0.024810, 0.022158
#*# 	  0.045049, 0.050043, 0.057731, 0.060163, 0.062382, 0.063879, 0.065912, 0.068451, 0.069192, 0.073443, 0.073476, 0.074886, 0.076731, 0.074965, 0.073988, 0.075187, 0.073509, 0.070785, 0.070871, 0.067466, 0.064234, 0.062003, 0.058284, 0.056414, 0.054837, 0.052064, 0.048994, 0.046762, 0.044612, 0.043659, 0.042457, 0.039622, 0.035835, 0.033712, 0.032213, 0.028020, 0.024135
#*# x_count = 37
#*# y_count = 17
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = direct
#*# tension = 0.1
#*# min_x = 120.322
#*# max_x = 209.678
#*# min_y = 120.322
#*# max_y = 209.678
